<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  js时间处理工具 - Z先生的乱语
  
  </title>
  
  
  
  <link href="atom.xml" rel="alternate" title="Z先生的乱语" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
  function before_search(){
    var searchVal = 'site:zhangyongbo.github.io ' + document.getElementById('search_input').value;
    document.getElementById('search_q').value = searchVal;
    return true;
  }
</script>
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        
        <li id=""><a target="_self" href="index.html">Home</a></li>
        
        <li id=""><a target="_self" href="Java.html">Java</a></li>
        
        <li id=""><a target="_self" href="Web.html">Web</a></li>
        
        <li id=""><a target="_self" href="DataBase.html">DataBase</a></li>
        
        <li id=""><a target="_self" href="Middleware.html">Middleware</a></li>
        
        <li id=""><a target="_self" href="Other.html">Other</a></li>
        
        <li id=""><a target="_self" href="archives.html">Archives</a></li>
        
        <li id=""><a target="_self" href="About.html">About</a></li>
        
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" onsubmit="return before_search();" action="https://google.com/search" method="get">
    <input type="hidden" id="search_q" name="q" value="" />
    <input tabindex="1" type="search" id="search_input"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; Z先生的乱语</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
        
        <li><a target="_self" href="index.html">Home</a></li>
        
        <li><a target="_self" href="Java.html">Java</a></li>
        
        <li><a target="_self" href="Web.html">Web</a></li>
        
        <li><a target="_self" href="DataBase.html">DataBase</a></li>
        
        <li><a target="_self" href="Middleware.html">Middleware</a></li>
        
        <li><a target="_self" href="Other.html">Other</a></li>
        
        <li><a target="_self" href="archives.html">Archives</a></li>
        
        <li><a target="_self" href="About.html">About</a></li>
        

    <li><label>Categories</label></li>

        
            <li><a href="Java.html">Java</a></li>
        
            <li><a href="Web.html">Web</a></li>
        
            <li><a href="DataBase.html">DataBase</a></li>
        
            <li><a href="Middleware.html">中间件</a></li>
        
            <li><a href="Other.html">Other</a></li>
         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
        
       

 <script type="text/javascript">
  $(function(){
    $('#menu_item_index').addClass('is_active');
  });
</script>
<div class="row">
  <div class="large-8 medium-8 columns">
      <div class="markdown-body article-wrap">
       <div class="article">
          
          <h1>js时间处理工具</h1>
     
        <div class="read-more clearfix">
          <span class="date">2019/8/10</span>

          <span>posted in&nbsp;</span> 
          
              <span class="posted-in"><a href='Web.html'>Web</a></span>
           
         
          <span class="comments">
            
              <a href="https://zhangyongbo.github.io/js%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7.html#disqus_thread">comments</a>
            

            
          </span>

        </div>
      </div><!-- article -->

      <div class="article-content">
      <span id="more"></span><!-- more -->

<pre class="line-numbers"><code class="language-javascript">/**
 * 日期格式化
 * yyyy/yy 年
 * MM/M 月
 * E 星期
 * dd/d 日
 * HH/H 小时
 * mm/m 分钟
 * ss/s 秒
 * SS/S 毫秒
 * 除年份、星期 外的配置项 单双位表示，小于10的值是否要前面补0，双位补0，单位不补
 * @param formatStr 格式化字符串 默认为yyyy-MM-dd
 * @returns {*}
 */
Date.prototype.Format = function (formatStr) {
    var Week = [&#39;星期日&#39;, &#39;星期一&#39;, &#39;星期二&#39;, &#39;星期三&#39;, &#39;星期四&#39;, &#39;星期五&#39;, &#39;星期六&#39;];
    formatStr = formatStr.replace(/yyyy/, this.getFullYear());
    formatStr = formatStr.replace(/yy/, (this.getYear() % 100) &gt; 9 ? (this.getYear() % 100).toString() : &#39;0&#39; + (this.getYear() % 100));
    formatStr = formatStr.replace(/MM/, this.getMonth() &gt; 9 ? this.getMonth().toString() : &#39;0&#39; + this.getMonth());
    formatStr = formatStr.replace(/M/g, this.getMonth());
    formatStr = formatStr.replace(/E/g, Week[this.getDay()]);
    formatStr = formatStr.replace(/dd/, this.getDate() &gt; 9 ? this.getDate().toString() : &#39;0&#39; + this.getDate());
    formatStr = formatStr.replace(/d/g, this.getDate());
    formatStr = formatStr.replace(/HH/, this.getHours() &gt; 9 ? this.getHours().toString() : &#39;0&#39; + this.getHours());
    formatStr = formatStr.replace(/H/g, this.getHours());
    formatStr = formatStr.replace(/mm/, this.getMinutes() &gt; 9 ? this.getMinutes().toString() : &#39;0&#39; + this.getMinutes());
    formatStr = formatStr.replace(/m/g, this.getMinutes());
    formatStr = formatStr.replace(/ss/, this.getSeconds() &gt; 9 ? this.getSeconds().toString() : &#39;0&#39; + this.getSeconds());
    formatStr = formatStr.replace(/s/g, this.getSeconds());
    formatStr = formatStr.replace(/SS/, this.getMilliseconds() &gt; 9 ? this.getMilliseconds().toString() : &#39;0&#39; + this.getMilliseconds());
    formatStr = formatStr.replace(/S/g, this.getMilliseconds());
    return formatStr;
}

/**
 * 获得某月的天数
 * @param paraYear 年
 * @param paraMonth 月
 * @returns {number}
 */
function getMonthDays(paraYear, paraMonth) {
    var monthStartDate = new Date(paraYear, paraMonth - 1, 1);
    var monthEndDate = new Date(paraYear, paraMonth, 1);
    var days = (monthEndDate - monthStartDate) / 86400000;//24 * 60 * 60 * 1000
    return days;
}

/**
 * 获得某月的结束日期
 * @param paraYear 年
 * @param paraMonth 月
 * @returns {string} yyyy-MM-dd
 */
function getMonthEndDate(paraYear, paraMonth) {
    var monthEndDate = new Date(paraYear, paraMonth - 1, getMonthDays(paraYear, paraMonth));
    return monthEndDate.Format(&#39;yyyy-MM-dd&#39;);
}

/**
 * 获取某年某周的开始日期
 * @param paraYear 年
 * @param weekIndex 周数
 * @returns yyyy-MM-dd
 */
function getBeginDateOfWeek(paraYear, weekIndex) {
    var firstDay = getFirstWeekBegDay(paraYear);
    //7*24*3600000 是一星期的时间毫秒数,(JS中的日期精确到毫秒)
    var time = (weekIndex - 1) * 604800000;//7 * 24 * 3600000
    var beginDay = firstDay;
    //为日期对象 date 重新设置成时间 time
    beginDay.setTime(firstDay.valueOf() + time);
    return beginDay.Format(&#39;yyyy-MM-dd&#39;);
}


/**
 * 获取某年某周的结束日期
 * @param paraYear 年
 * @param weekIndex 周数
 * @returns yyyy-MM-dd
 */
function getEndDateOfWeek(paraYear, weekIndex) {
    var firstDay = getFirstWeekBegDay(paraYear);
    //7*24*3600000 是一星期的时间毫秒数,(JS中的日期精确到毫秒)
    var time = (weekIndex - 1) * 604800000;//7 * 24 * 3600000
    var weekTime = 518400000;//6天的毫秒数 6 * 24 * 3600000
    var endDay = firstDay;
    //为日期对象 date 重新设置成时间 time
    endDay.setTime(firstDay.valueOf() + weekTime + time);
    return endDay.Format(&#39;yyyy-MM-dd&#39;);
}

/**
 * 获取某年的第一天
 * @param {*} year 年份
 * @returns Date对象
 */
function getFirstWeekBegDay(year) {
    var tempdate = new Date(year, 0, 1);
    var temp = tempdate.getDay();
    if (temp == 1) {
        return tempdate;
    }
    temp = temp == 0 ? 7 : temp;
    tempdate = tempdate.setDate(tempdate.getDate() + (8 - temp));
    return new Date(tempdate);
}
/**
 * 获取日期为某年的第几周
 * @param date date对象
 * @returns {number} 年周位数
 */
function getWeekIndex(date) {
    var firstDay = getFirstWeekBegDay(date.getFullYear());
    if (date &lt; firstDay) {
        firstDay = getFirstWeekBegDay(date.getFullYear() - 1);
    }
    var d = Math.floor((date.valueOf() - firstDay.valueOf()) / 86400000);
    return Math.floor(d / 7) + 1;
}

/**
 * 获取2个日期之间的日期
 * @param begin 开始 yyyy-MM-dd
 * @param end 结束 yyyy-MM-dd
 * @returns {Array} yyyy-MM-dd日期数组
 */
function getDayBetween(begin, end) {
    var ab = begin.split(&quot;-&quot;);
    var ae = end.split(&quot;-&quot;);
    var db = new Date(ab[0], Number(ab[1]), Number(ab[2])).getTime();
    var de = new Date(ae[0], Number(ae[1]), Number(ae[2])).getTime();
    var result = [];
    for (var k = db; k &lt;= de;) {
        result.push(new Date(k).Format(&#39;yyyy-MM-dd&#39;));
        k += 86400000;//24 * 60 * 60 * 1000
    }
    return result;
}
/**
 * 数字转中文，0不做处理
 * 数字字符转中文，而不是数字转换中文数字
 * 2018 转换为 二0一八
 * @param num
 * @returns {string} 如：2018 转换为 二0一八
 */
function numberCharToChinese(num) {
    var china = new Array(&#39;0&#39;, &#39;一&#39;, &#39;二&#39;, &#39;三&#39;, &#39;四&#39;, &#39;五&#39;, &#39;六&#39;, &#39;七&#39;, &#39;八&#39;, &#39;九&#39;);
    var arr = &quot;&quot;;
    var english = (Number(num) + &quot;&quot;).split(&quot;&quot;);
    for (var i = 0; i &lt; english.length; i++) {
        arr += china[english[i]];
    }
    return arr;
}
/**
 * 数字转中文
 * @number {Integer} 形如123的数字
 * @return {String} 返回转换成的形如 一百二十三 的字符串
 */
function numberToChinese(number) {
    var units = &#39;个十百千万@#%亿^&amp;~&#39;;
    var chars = &#39;零一二三四五六七八九&#39;;
    var a = (number + &#39;&#39;).split(&#39;&#39;),
        s = [];
    if (a.length &gt; 12) {
        throw new Error(&#39;too big&#39;);
    } else {
        for (var i = 0, j = a.length - 1; i &lt;= j; i++) {
            if (j == 1 || j == 5 || j == 9) { //两位数 处理特殊的 1*
                if (i == 0) {
                    if (a[i] != &#39;1&#39;) s.push(chars.charAt(a[i]));
                } else {
                    s.push(chars.charAt(a[i]));
                }
            } else {
                s.push(chars.charAt(a[i]));
            }
            if (i != j) {
                s.push(units.charAt(j - i));
            }
        }
    }
    return s.join(&#39;&#39;).replace(/零([十百千万亿@#%^&amp;~])/g, function (m, d, b) { //优先处理 零百 零千 等
        b = units.indexOf(d);
        if (b != -1) {
            if (d == &#39;亿&#39;) return d;
            if (d == &#39;万&#39;) return d;
            if (a[j - b] == &#39;0&#39;) return &#39;零&#39;
        }
        return &#39;&#39;;
    }).replace(/零+/g, &#39;零&#39;).replace(/零([万亿])/g, function (m, b) { // 零百 零千处理后 可能出现 零零相连的 再处理结尾为零的
        return b;
    }).replace(/亿[万千百]/g, &#39;亿&#39;).replace(/[零]$/, &#39;&#39;).replace(/[@#%^&amp;~]/g, function (m) {
        return {
            &#39;@&#39;: &#39;十&#39;,
            &#39;#&#39;: &#39;百&#39;,
            &#39;%&#39;: &#39;千&#39;,
            &#39;^&#39;: &#39;十&#39;,
            &#39;&amp;&#39;: &#39;百&#39;,
            &#39;~&#39;: &#39;千&#39;
        }[m];
    }).replace(/([亿万])([一-九])/g, function (m, d, b, c) {
        c = units.indexOf(d);
        if (c != -1) {
            if (a[j - c] == &#39;0&#39;) return d + &#39;零&#39; + b
        }
        return m;
    });
}

/**
 * 日期转中文，1-7 周一 - 周日
 * @param weekType 类型 zhweek：星期，其它： 周
 * @param val 周数 1-7（周一 - 周日）
 * @returns {String} 星期一/周一
 */
function zhWeek(weekType, val) {
    if (weekType == &#39;zhweek&#39;) {
        weekType = &#39;星期&#39;;
    } else {
        weekType = &#39;周&#39;;
    }
    if (val == 7) {
        return weekType + &quot;日&quot;;
    } else {
        return weekType + numberCharToChinese(val);
    }
}
</code></pre>


    

      </div>

      <div class="row">
        <div class="large-6 columns">
        <p class="text-left" style="padding:15px 0px;">
      
          <a href="ID%E7%94%9F%E6%88%90%E5%B7%A5%E5%85%B7%E7%B1%BB.html" 
          title="Previous Post: ID生成工具类">&laquo; ID生成工具类</a>
      
        </p>
        </div>
        <div class="large-6 columns">
      <p class="text-right" style="padding:15px 0px;">
      
      </p>
        </div>
      </div>
      <div class="comments-wrap">
        <div class="share-comments">
          

          
            <div id="disqus_thread"></div>
          

          
        </div>
      </div>
    </div><!-- article-wrap -->
  </div><!-- large 8 -->




 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <div class="site-a-logo"><img src="https://raw.githubusercontent.com/zhangyongbo/pic/master/picgo/dao_black.png" /></div>
            
                <h1>Z先生的乱语</h1>
                <div class="site-des">这是一个程序猿的乱语</div>
                <div class="social">









<a target="_blank" class="github" target="_blank" href="https://github.com/zhangyongbo" title="GitHub">GitHub</a>
<a target="_blank" class="email" href="mailto:china.zhangyongbo@gmail.com" title="Email">Email</a>
  <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>

             

              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
        
            <a href="Java.html"><strong>Java</strong></a>
        
            <a href="Web.html"><strong>Web</strong></a>
        
            <a href="DataBase.html"><strong>DataBase</strong></a>
        
            <a href="Middleware.html"><strong>中间件</strong></a>
        
            <a href="Other.html"><strong>Other</strong></a>
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="15655055338215.html">企业常用资产利率换算</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="weblogic%E9%9B%86%E7%BE%A4session%E5%A4%8D%E5%88%B6.html">weblogic集群session复制</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="RedHat%E5%AE%89%E8%A3%85JDK.html">RedHat安装JDK</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="JMail%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81.html">JMail邮件发送</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="ID%E7%94%9F%E6%88%90%E5%B7%A5%E5%85%B7%E7%B1%BB.html">ID生成工具类</a>
			      </li>
		     
		  
		      
		   
		  		</ul>
                </div>
              </div>
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
</div>

        </section>
      </div>
    </div>


<script type="text/javascript">
    var disqus_shortname = 'china-zyb'; 

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

<script type="text/javascript">
var disqus_shortname = 'china-zyb'; 

(function () {
var s = document.createElement('script'); s.async = true;
s.type = 'text/javascript';
s.src = '//' + disqus_shortname + '.disqus.com/count.js';
(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>
  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>

    



  </body>
</html>
